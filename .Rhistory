arrange(`Unit Name`, YearRaw)
nps <- read_csv("All National Parks Visitation 1904-2016.csv")
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw)
colnames(nps) <- c("Park", "Region", "State", "Code", "Name", "Type", "Visitors", "Year")
nps
summary(nps)
nps[,1:2]
nps[,1:6] <- as.factor(nps[,1:6])
nps[,1:6] <- factor(nps[,1:6])
nps
nps$Park <- factor(nps$Park)
nps
nps$Park <- factor(nps$Park)
nps$Region <- factor(nps$Region)
nps$State <- factor(nps$State)
nps$Code <- factor(nps$Code)
nps$Name <- factor(nps$Name)
nps$Type <- factor(nps$Type)
nps$Year <- numeric(nps$Year)
nps$Year <- as.numeric(nps$Year)
nps
View(nps)
nps <- read_csv("All National Parks Visitation 1904-2016.csv")
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw)
colnames(nps) <- c("Park", "Region", "State", "Code", "Name", "Type", "Visitors", "Year")
nps$Park <- factor(nps$Park)
nps$Region <- factor(nps$Region)
nps$State <- factor(nps$State)
nps$Code <- factor(nps$Code)
nps$Name <- factor(nps$Name)
nps$Type <- factor(nps$Type)
summary(nps)
nps$Year <- as.numeric(nps$Year)
summary(nps)
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw) %>%
filter(is.na(YearRaw) = FALSE)
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw) %>%
filter(is.na(YearRaw) == FALSE)
nps <- read_csv("All National Parks Visitation 1904-2016.csv")
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw) %>%
filter(is.na(YearRaw) == FALSE)
colnames(nps) <- c("Park", "Region", "State", "Code", "Name", "Type", "Visitors", "Year")
nps$Park <- factor(nps$Park)
nps$Region <- factor(nps$Region)
nps$State <- factor(nps$State)
nps$Code <- factor(nps$Code)
nps$Name <- factor(nps$Name)
nps$Type <- factor(nps$Type)
nps
nps$Year <- numeric(nps$Year)
nps$Year <- as.numeric(nps$Year)
summary(nps)
nps <- read_csv("All National Parks Visitation 1904-2016.csv")
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw) %>%
filter(YearRaw != "Total")
colnames(nps) <- c("Park", "Region", "State", "Code", "Name", "Type", "Visitors", "Year")
nps$Park <- factor(nps$Park)
nps$Region <- factor(nps$Region)
nps$State <- factor(nps$State)
nps$Code <- factor(nps$Code)
nps$Name <- factor(nps$Name)
nps$Type <- factor(nps$Type)
nps$Year <- numeric(nps$Year)
nps$Year <- as.numeric(nps$Year)
summary(nps)
unique(nps$Type)
nps %>% filter(Year == 2016) %>%
group_by(Type) %>%
count()
View(nps %>% filter(Year == 2016) %>%
group_by(Type) %>%
count())
nps %>% filter(Type=="National Park") %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Name)) +
theme_minimal()
parks <- nps %>%
filter(Type=="National Park") %>%
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
parks
View(parks)
parks <- nps %>%
filter(Type=="National Park", Code!="WOTR") %>%
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
View(parks)
parks <- nps %>%
filter(Type=="National Park",
Code!="WOTR") %>% # for some reason, Wolf Trap Center for Performing Arts is there
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
View(parks)
parks <- nps %>%
filter(Type=="National Park",
Code!="WOTR") %>% # for some reason, Wolf Trap Center for Performing Arts is there
group_by(State, Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
View(parks)
parks <- nps %>%
filter(Type=="National Park",
Code!="WOTR") %>% # for some reason, Wolf Trap Center for Performing Arts is there
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
View(parks)
parks <- nps %>%
filter(Type=="National Park",
Code!="WOTR",
Name~="Denali National Preserve") %>% # for some reason, Wolf Trap Center for Performing Arts is there, and Denali is doubled
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
nps <- read_csv("All National Parks Visitation 1904-2016.csv")
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw) %>%
filter(YearRaw!="Total")
colnames(nps) <- c("Park", "Region", "State", "Code", "Name", "Type", "Visitors", "Year")
nps$Park <- factor(nps$Park)
nps$Region <- factor(nps$Region)
nps$State <- factor(nps$State)
nps$Code <- factor(nps$Code)
nps$Name <- factor(nps$Name)
nps$Type <- factor(nps$Type)
nps$Year <- as.numeric(nps$Year)
parks <- nps %>%
filter(Type=="National Park",
Code!="WOTR",
Name~="Denali National Preserve") %>% # for some reason, Wolf Trap Center for Performing Arts is there, and Denali is doubled
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
parks <- nps %>%
filter(Type=="National Park",
Code!="WOTR",
Name!="Denali National Preserve") %>% # for some reason, Wolf Trap Center for Performing Arts is there, and Denali is doubled
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
View(parks)
parks <- nps %>%
filter(Type=="National Park",
Code!="WOTR",
Name!="Denali National Preserve") %>% # for some reason, Wolf Trap Center for Performing Arts is there, and Denali is doubled
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
View(parks)
nps %>% filter(Name %in% parks$Name) %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Name)) +
theme_minimal()
nps %>% filter(Name %in% parks$Name) %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Name)) +
facet_grid(Region) +
theme_minimal()
nps
nps %>% filter(Name %in% parks$Name) %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Name)) +
facet_grid(~ Region) +
theme_minimal()
nps %>% filter(Name %in% parks$Name, Region=="AK") %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Name)) +
theme_minimal()
nps %>% filter(Name %in% parks$Name, Region=="IM") %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Name)) +
theme_minimal()
nps %>% filter(Name %in% parks$Name, Region=="MW") %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Name)) +
theme_minimal()
write_csv(parks, "parks.csv")
parks <- nps %>%
filter(Type=="National Park",
Code!="WOTR",
Name!="Denali National Preserve") %>% # for some reason, Wolf Trap Center for Performing Arts is there, and Denali is doubled
group_by(Name) %>%
summarise(Total = sum(Visitors))
View(parks)
write_csv(parks, "parks.csv")
parks <- read_csv("parks.csv")
parks
merge(nps, parks)
nps
parks <- merge(nps, parks)
parks
parks <- merge(nps, parks) %>%
select(Name, Region, State, Code, Visitors, Year, Area)
parks
parks <- merge(nps, parks) %>%
select(Name, Region, State, Code, Visitors, Year, Area) %>%
arrange(Name, Year)
parks
parks
nps <- read_csv("All National Parks Visitation 1904-2016.csv")
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw) %>%
filter(YearRaw!="Total")
colnames(nps) <- c("Park", "Region", "State", "Code", "Name", "Type", "Visitors", "Year")
nps$Park <- factor(nps$Park)
nps$Region <- factor(nps$Region)
nps$State <- factor(nps$State)
nps$Code <- factor(nps$Code)
nps$Name <- factor(nps$Name)
nps$Type <- factor(nps$Type)
nps$Year <- as.numeric(nps$Year)
parks <- read_csv("parks.csv")
parks
nps
parks <- read_csv("parks_area.csv")
area <- read_csv("parks_area.csv")
parks <- merge(nps, area) %>%
select(Name, Region, State, Code, Visitors, Year, Area) %>%
arrange(Name, Year) %>%
parks
parks <- merge(nps, area) %>%
select(Name, Region, State, Code, Visitors, Year, Area) %>%
arrange(Name, Year)
parks
parks <- merge(nps, area) %>%
select(Name, Region, State, Code, Visitors, Year, Area) %>%
arrange(Name, Year) %>% as_tibble()
parks
parks <- merge(nps, area) %>%
select(Name, Region, State, Code, Visitors, Year, Area) %>%
arrange(Name, Year) %>%
as_tibble() %>%
mutate(PersonAcre = Visitors/Area)
parks
save(parks, file="parkVisits.Rda")
parks
load("parkVisits.Rda")
View(parks)
gsub("Acadia National Park", "National Park")
?gsub
gsub("National Park", "", "Acadia National Park")
write_csv(parks, "parks.csv")
parks <- read_csv("parks.csv")
parks
load("parkVisits.Rda")
parks <- read_csv("parks.csv")
parks
save(parks, file="parkVisits.Rda")
load("parkVisits.Rda")
parks$Label <- ifelse(parks$Year==2016, parks$ShortName, NA)
View(parks)
library(ggrepel)
summary(parks)
data = subset(parks, ShortName == max(Year)),
parks %>%
ggplot(aes(x=Year, y=Visitors)) +
geom_path(aes(color=Region)) +
geom_text_repel(data = subset(parks, ShortName == max(Year)), aes(label = ShortName), size = 6, nudge_x = 45, segment.color = NA) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Visitors)) +
geom_path(aes(color=Region)) +
geom_text_repel(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Visitors)) +
geom_path() +
geom_text_repel(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Visitors)) +
geom_path() +
#geom_text_repel(aes(label=Label)) +
theme_minimal()
parks
parks %>%
ggplot(aes(x=Year, y=Visitors)) +
geom_line() +
#geom_text_repel(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Region)) +
geom_text_repel(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Visitors, group=Name)) +
geom_path(aes(color=Region)) +
geom_label_repel(aes(label=Label)) +
theme_minimal()
nps <- read_csv("All National Parks Visitation 1904-2016.csv")
nps <- nps %>%
select(Parkname:YearRaw) %>%
arrange(`Unit Name`, YearRaw) %>%
filter(YearRaw!="Total")
colnames(nps) <- c("Park", "Region", "State", "Code", "Name", "Type", "Visitors", "Year")
nps$Park <- factor(nps$Park)
nps$Region <- factor(nps$Region)
nps$State <- factor(nps$State)
nps$Code <- factor(nps$Code)
nps$Name <- factor(nps$Name)
nps$Type <- factor(nps$Type)
nps$Year <- as.numeric(nps$Year)
parkTotals <- nps %>%
filter(Type=="National Park",
Code!="WOTR",
Name!="Denali National Preserve") %>% # for some reason, Wolf Trap Center for Performing Arts is there, and Denali is doubled
group_by(Name) %>%
summarise(Total = sum(Visitors)) %>%
arrange(-Total)
parkTotals
parkTotals <- parks %>%
filter(Year==2016) %>%
arrange(-Total)
parkTotals <- parks %>%
filter(Year==2016) %>%
arrange(-Visitors)
parkTotals
load("parkVisits.Rda")
parkTotals <- parks %>%
filter(Year==2016) %>%
arrange(-Visitors)
parkTotals
head(parkTotals, 20)
parks
parks %>%
ggplot(aes(x=Name, y=Visitors)) +
geom_violin() +
theme_minimal()
parks %>%
ggplot(aes(x=Name, y=Visitors)) +
geom_violin() +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=Name, y=Visitors)) +
geom_violin() +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=Name, y=Visitors)) +
geom_violin() +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_path() +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_path() +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_jitter() +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_point(aplha=.1, size=.1) +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_point(aes(aplha=year), size=.1) +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_point(aes(aplha=Year), size=.1) +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_point(aes(alpha=Year), size=.1) +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_point(aes(alpha=Year/100), size=.1) +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_point(aes(alpha=Year), size=.1, alpha=alpha/10) +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_point(aes(alpha=Year), size=.1) +
theme_minimal() +
coord_flip()
parks %>%
ggplot(aes(x=ShortName, y=Visitors, group=ShortName)) +
geom_point(aes(alpha=Year), size=.1) +
theme_minimal() +
coord_flip()
top10 <- parkTotals$ShortName[1:10]
top10
parks %>%
ggplot(aes(x=Year, y=Visitors, group=ShortName)) +
geom_path() +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Visitors, group=ShortName)) +
geom_path(alpha=.5) +
theme_minimal()
parks$Label <- ifelse(parks==2016,
ifelse(parks$ShortName %in% top10, parks$ShortName, NA))# get total visitors by year
parks$Label <- ifelse(parks==2016,
ifelse(parks$ShortName %in% top10, parks$ShortName, NA), NA)# get total visitors by year
View(parks)
load("parkVisits.Rda")
parkTotals <- parks %>%
filter(Year==2016) %>%
arrange(-Visitors)
top10 <- parkTotals$ShortName[1:10]
parks$Label <- ifelse(parks$Year==2016,
ifelse(parks$ShortName %in% top10, parks$ShortName, NA), NA)# get total visitors by year
knitr::opts_chunk$set(echo = TRUE)
# load packages
library(tidyverse)
library(ggthemes)
library(cowplot)
library(ggrepel)
# load data
load("parkVisits.Rda")
parks %>%
ggplot(aes(x=Year, y=Visitors, group=ShortName)) +
geom_path(alpha=.5) +
geom_text(aes(label=Label)) +
theme_minimal()
parks
parks$Label <- ifelse(parks$Year==2016,
ifelse(parks$ShortName %in% top10, parks$ShortName, NA), NA)# get total visitors by year
parks
parks %>%
ggplot(aes(x=Year, y=Visitors, group=ShortName)) +
geom_path(alpha=.5) +
geom_text(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Visitors, group=ShortName)) +
geom_path(alpha=.5) +
geom_text_repel(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Visitors, group=ShortName)) +
geom_path(alpha=.5) +
geom_label_repel(aes(label=Label)) +
theme_minimal()
load("parkVisits.Rda")
parks %>% group_by(Year) %>%
summarise(N = n(), Total = sum(Visitors))
totals <- parks %>% group_by(Year) %>%
summarise(N = n(), Total = sum(Visitors))
inner_join(parks, totals)
totals <- parks %>% group_by(Year) %>%
summarise(YearTotal = sum(Visitors))
inner_join(parks, totals)
parks <- parks %>% mutate(Share = Visitors/YearTotal)
parks <- inner_join(parks, totals)
parks <- parks %>% mutate(Share = Visitors/YearTotal)
parks %>%
ggplot(aes(x=Year, y=Share, group=ShortName)) +
geom_path(alpha=.5) +
geom_label_repel(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Share, group=ShortName)) +
geom_path(alpha=.5) +
theme_minimal()
parkTotals <- parks %>%
filter(Year==2016) %>%
arrange(-Visitors)
top10 <- parkTotals$ShortName[1:10]
parks$Label <- ifelse(parks$Year==2016,
ifelse(parks$ShortName %in% top10, parks$ShortName, NA), NA)# get total visitors by year
parks %>%
ggplot(aes(x=Year, y=Share, group=ShortName)) +
geom_path(alpha=.5) +
geom_label_repel(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Share, group=ShortName)) +
geom_path(aes(color=ShortName), alpha=.5) +
geom_label_repel(aes(label=Label)) +
theme_minimal()
parks %>%
ggplot(aes(x=Year, y=Share, group=ShortName)) +
geom_path(aes(color=ShortName), alpha=.5) +
geom_text(aes(label=Label)) +
theme_minimal()
